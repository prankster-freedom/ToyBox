---
description: 実装
---

# エージェントが遵守すべきルール

このドキュメントは、エージェントであるあなたが、このプロジェクトで開発作業を行う際に遵守すべきルールとワークフローを定義します。

## 2. 各工程の詳細ルール

### 工程 3: 実装

- **実装ドキュメントの作成ルール**:
  - **ディレクトリ構成**: ソースコードと **1:1 の構造** を維持し、`doc/3.implementation/` 以下に作成してください (例: `lib/auth.js` -> `doc/3.implementation/lib/auth.js.md`)。
  - **依存関係図 (Mermaid)**: 各ドキュメントには必ず Mermaid (`flowchart TD`) で依存関係を記述してください。
    - **Dependencies**: そのモジュールが使用しているライブラリやモジュール。
    - **Consumers**: そのモジュールを使用している（依存している）モジュール。
    - **構文**: ノード名に特殊文字が含まれる場合は **必ずダブルクォートで囲むこと** (例: `id["@scope/pkg"]`)。
- 新規機能は、まずスケルトン（関数、API、イベントハンドラ等）から実装し、次に詳細ロジックを実装します。呼び出し前後のエラー判定や例外処理も実装します。
- 処理の把握しやすさや保守性を維持するために 1 つの関数は、最大でも 80 行程度に収めてください
- **【重要】** **一つのファイル修正やコマンド実行ごとに**、ユーザーに報告・**承認を求めます。**
- サーバーの起動や API の実行といった動的テスト（動作確認）は、**禁止です。**
