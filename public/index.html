<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>ToyBox</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="shortcut icon" href="#">
</head>
<body class="lang-jp">

    <!-- BACKGROUND -->
    <div class="flower-bg">
        <div class="petal p1"></div>
        <div class="petal p2"></div>
        <div class="petal p3"></div>
    </div>

    <!-- LANGUAGE SWITCHER -->
    <div class="lang-switch">
        <button class="lang-btn" id="btn-lang-en">EN</button>
        <button class="lang-btn active" id="btn-lang-jp">JP</button>
    </div>

    <!-- USER MENU (Shown if logged in) -->
    <div class="user-menu" id="userMenu" style="display: none;">
        <span class="user-name" id="userName"></span>
        <button class="logout-btn" onclick="location.href='/auth/logout'" data-key="nav_logout">Log out</button>
    </div>

    <!-- AUTH OVERLAY (Shown if not logged in) -->
    <div class="auth-overlay active" id="authOverlay">
        <div class="auth-card">
            <h1 class="title-font" style="margin-bottom: 30px; color: #5a4d4d;">ToyBox</h1>
            <a href="/auth/google" class="auth-btn">
                <img src="https://developers.google.com/identity/images/g-logo.png" alt="G" width="20">
                Log in with Google
            </a>
        </div>
    </div>

    <!-- MAIN APP (Content) -->
    <!-- Navigation -->
    <nav class="nav-header">
        <button class="nav-btn active title-font" id="btn-chat" data-key="nav_chat">Dialogue</button>
        <button class="nav-btn title-font" id="btn-diary" data-key="nav_diary">Collection</button>
    </nav>

    <div class="viewport" id="appViewport">
        <!-- SCENE: CHAT -->
        <div class="scene active" id="scene-chat">
            <div class="stage">
                <div class="chest-target" id="chestTarget">üóùÔ∏è</div>
                <div class="curved-stream" id="stream"></div>
            </div>
        </div>

        <!-- SCENE: DIARY -->
        <div class="scene" id="scene-diary">
            <div class="diary-container">
                <div class="diary-title title-font" data-key="diary_title">Precious Moments</div>
                <div class="masonry-grid" id="diaryGrid"></div>
            </div>
        </div>

        <!-- GLOBAL INPUT DOCK -->
        <div class="input-dock" id="inputDock">
            <div class="input-wrapper">
                <input type="text" class="main-input" id="inputBox" placeholder="Write something beautiful...">
                <button class="send-btn" id="sendBtn">‚ú¶</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
