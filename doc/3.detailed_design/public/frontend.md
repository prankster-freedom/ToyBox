# 詳細設計: フロントエンドアーキテクチャ (`public/`)

## 概要

Vue.js (CDN 版またはビルドなしの ES Modules 版) を使用したシングルページアプリケーション (SPA)。
ビルドステップを排除し、ブラウザネイティブの ES Modules (`<script type="module">`) を活用する。

## ディレクトリ構成

- `index.html`: エントリーポイント
- `css/`: スタイルシート (Vanilla CSS)
- `js/`: JavaScript モジュール
  - `app.js`: Vue アプリケーションの初期化
  - `components/`: Vue コンポーネント (.js ファイルとして定義)
  - `services/`: API クライアント
  - `store/`: 状態管理 (簡易的な Reactive Store)

## コンポーネント設計

### `App` (Root)

- レイアウト（ヘッダー、メインエリア、フッター）を定義。
- ルーティング（簡易的な動的コンポーネント切り替え）を管理。

### `ChatView`

- チャット画面。
- メッセージリストの表示。
- 入力フォーム。
- 自動スクロール制御。

### `SettingsView`

- ユーザー設定画面。
- 記憶消去ボタン。

### `DebugPanel` (開発者用)

- API レスポンスに含まれる `_debug` 情報を表示するオーバーレイまたはサイドパネル。
- `NFR5` (デバッグ情報表示) を満たすためのコンポーネント。

## データフロー

1. **API 呼び出し**: `services/api.js` が `fetch` でバックエンド API を叩く。
2. **状態更新**: レスポンスを受け取り、`store/chatStore.js` などの Reactive State を更新する。
3. **描画**: Vue が State の変更を検知し、DOM を更新する。

## 認証フロー

1. ログインボタン押下 -> `/auth/google` へリダイレクト。
2. 認証後、`/` へリダイレクトされる。
3. アプリ初期化時に `/api/user` を叩き、ログイン状態を確認。
   - 成功: ユーザー情報を Store に保存し、チャット画面へ。
   - 失敗 (401): ログイン画面（LP）を表示。
